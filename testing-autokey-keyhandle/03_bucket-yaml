apiVersion: storage.gcp.upbound.io/v1beta2
kind: Bucket
metadata:
  name: us-east1-bucket-iam-autokey-test
spec:
  forProvider:
    location: us-east1
    project: autokey-consumer-project1
    encryption:
      defaultKmsKeyName: projects/autokey-458617/locations/us-east1/keyRings/autokey/cryptoKeys/291042791675-storage-bucket-5f245dc11c083939 # from KeyHandle.status.atProvider.kmsKey
  providerConfigRef:
    name: gcp-cdmc
---
# APPLIED TO CLUSTER WITH SUCCESS STATUS:

# apiVersion: storage.gcp.upbound.io/v1beta2
# kind: Bucket
# metadata:
#   annotations:
#     crossplane.io/external-create-pending: "2025-05-08T01:31:41Z"
#     crossplane.io/external-create-succeeded: "2025-05-08T01:31:41Z"
#     crossplane.io/external-name: us-east1-bucket-iam-autokey-test
#     kubectl.kubernetes.io/last-applied-configuration: |
#       {"apiVersion":"storage.gcp.upbound.io/v1beta2","kind":"Bucket","metadata":{"annotations":{},"name":"us-east1-bucket-iam-autokey-test"},"spec":{"forProvider":{"encryption":{"defaultKmsKeyName":"projects/autokey-458617/locations/us-east1/keyRings/autokey/cryptoKeys/291042791675-storage-bucket-5f245dc11c083939"},"location":"us-east1","project":"autokey-consumer-project1"},"providerConfigRef":{"name":"gcp-cdmc"}}}
#   creationTimestamp: "2025-05-08T01:30:41Z"
#   finalizers:
#   - finalizer.managedresource.crossplane.io
#   generation: 2
#   name: us-east1-bucket-iam-autokey-test
#   resourceVersion: "7385897"
#   uid: 2e220021-ca7c-445d-a28c-e896c08e66a9
# spec:
#   deletionPolicy: Delete
#   forProvider:
#     encryption:
#       defaultKmsKeyName: projects/autokey-458617/locations/us-east1/keyRings/autokey/cryptoKeys/291042791675-storage-bucket-5f245dc11c083939
#     location: us-east1
#     project: autokey-consumer-project1
#     publicAccessPrevention: inherited
#     softDeletePolicy:
#       retentionDurationSeconds: 604800
#     storageClass: STANDARD
#   initProvider: {}
#   managementPolicies:
#   - '*'
#   providerConfigRef:
#     name: gcp-cdmc
# status:
#   atProvider:
#     defaultEventBasedHold: false
#     enableObjectRetention: false
#     encryption:
#       defaultKmsKeyName: projects/autokey-458617/locations/us-east1/keyRings/autokey/cryptoKeys/291042791675-storage-bucket-5f245dc11c083939
#     forceDestroy: false
#     id: us-east1-bucket-iam-autokey-test
#     location: US-EAST1
#     project: autokey-consumer-project1
#     projectNumber: 291042791675
#     publicAccessPrevention: inherited
#     requesterPays: false
#     selfLink: https://www.googleapis.com/storage/v1/b/us-east1-bucket-iam-autokey-test
#     softDeletePolicy:
#       effectiveTime: "2025-05-08T01:31:42.501Z"
#       retentionDurationSeconds: 604800
#     storageClass: STANDARD
#     uniformBucketLevelAccess: false
#     url: gs://us-east1-bucket-iam-autokey-test
#   conditions:
#   - lastTransitionTime: "2025-05-08T01:31:44Z"
#     reason: Available
#     status: "True"
#     type: Ready
#   - lastTransitionTime: "2025-05-08T01:31:41Z"
#     reason: ReconcileSuccess
#     status: "True"
#     type: Synced
#   - lastTransitionTime: "2025-05-08T01:31:42Z"
#     reason: Success
#     status: "True"
#     type: LastAsyncOperation